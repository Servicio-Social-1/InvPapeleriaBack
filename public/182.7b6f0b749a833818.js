"use strict";(self.webpackChunkgestionPapeleriaUI=self.webpackChunkgestionPapeleriaUI||[]).push([[182],{5098:(x,T,t)=>{t.d(T,{W:()=>B});var o=t(4006),a=t(5412),n=t(3713),m=t(7957),e=t(4650),u=t(8259),r=t(798),i=t(3589),d=t(8128),f=t(6895),b=t(7392),y=t(4859),L=t(9549),R=t(4144),F=t(3546);const $=["formDirective"];function W(D,A){1&D&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del \xe1rea es "),e.TgZ(2,"strong"),e._uU(3,"obligatorio"),e.qZA()())}function K(D,A){1&D&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del debe ser de m\xednimo "),e.TgZ(2,"strong"),e._uU(3,"3"),e.qZA(),e._uU(4," caracteres "),e.qZA())}function O(D,A){1&D&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del debe ser de m\xe1ximo "),e.TgZ(2,"strong"),e._uU(3,"100"),e.qZA(),e._uU(4," caracteres "),e.qZA())}let B=(()=>{class D{constructor(p,I,P,h,_,s){this.data=p,this.areasService=I,this.areasStore=P,this.dialogService=h,this.dialogMessageService=_,this.fb=s,this.matcher=new m.n,this.newAreaForm=this.fb.group({name:["",[o.kI.required,o.kI.maxLength(100),o.kI.minLength(3)]]})}ngOnInit(){this?.data?.area&&this.newAreaForm.get("name")?.setValue(this?.data?.area?.name)}invalidator(p,I){return this.newAreaForm.controls[p].hasError(I)&&this.newAreaForm.controls[p].touched}requiredInputInvalidator(p){return this.invalidator(p,"required")}minLengthInputInvalidator(p){return this.invalidator(p,"minlength")}maxLengthInputInvalidator(p){return this.invalidator(p,"maxlength")}createItem(){if(!this.newAreaForm.invalid)return this?.data?.area?this.updateItem():this.areasService.createArea(this.formDirective.value).subscribe({next:p=>{this.areasStore.emitNewArea({options:["edit","delete"],...p}),this.dialogMessageService.setMessage("\xc1rea creada exitosamente"),this.dialogService.openDialog({component:n.P,callback:()=>this.closeDialog()})},error:p=>{this.dialogMessageService.setMessage(p.error.message),this.dialogService.openDialog({component:n.P})}});this.newAreaForm.markAllAsTouched()}updateItem(){return this.areasService.updateArea(this.data?.area?.id,{...this.newAreaForm.value}).subscribe({next:({message:p})=>{this.areasStore.updateArea({id:this.data?.area?.id,name:this.newAreaForm.value.name,status:this.data?.area?.status,options:["edit","delete"]}),this.dialogMessageService.setMessage(p),this.dialogService.openDialog({component:n.P,callback:()=>this.closeDialog()})},error:p=>{this.dialogMessageService.setMessage(p.error.message),this.dialogService.openDialog({component:n.P})}})}closeDialog(){this.dialogService.closeDialog()}}return D.\u0275fac=function(p){return new(p||D)(e.Y36(a.WI),e.Y36(u.E),e.Y36(r.v),e.Y36(i.x),e.Y36(d.z),e.Y36(o.qu))},D.\u0275cmp=e.Xpm({type:D,selectors:[["app-new-area"]],viewQuery:function(p,I){if(1&p&&e.Gf($,5),2&p){let P;e.iGM(P=e.CRH())&&(I.formDirective=P.first)}},decls:19,vars:5,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["appearance","fill",1,"mt","mb"],["matInput","","type","text","placeholder","Nombre del \xe1rea","formControlName","name"],[4,"ngIf"],[1,"flex"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","type","button",3,"click"]],template:function(p,I){1&p&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA(),e.TgZ(2,"mat-card-content")(3,"form",0,1),e.NdJ("ngSubmit",function(){return I.createItem()}),e.TgZ(5,"mat-form-field",2)(6,"mat-label"),e._uU(7,"Nombre"),e.qZA(),e._UZ(8,"input",3),e.YNc(9,W,4,0,"mat-error",4),e.YNc(10,K,5,0,"mat-error",4),e.YNc(11,O,5,0,"mat-error",4),e.qZA(),e.TgZ(12,"mat-card-actions",5)(13,"button",6)(14,"mat-icon"),e._uU(15,"save_alt"),e.qZA(),e._uU(16," Guardar "),e.qZA(),e.TgZ(17,"button",7),e.NdJ("click",function(){return I.closeDialog()}),e._uU(18,"Cerrar"),e.qZA()()()()),2&p&&(e.xp6(1),e.Oqu(I.data.title),e.xp6(2),e.Q6J("formGroup",I.newAreaForm),e.xp6(6),e.Q6J("ngIf",I.requiredInputInvalidator("name")),e.xp6(1),e.Q6J("ngIf",I.minLengthInputInvalidator("name")),e.xp6(1),e.Q6J("ngIf",I.maxLengthInputInvalidator("name")))},dependencies:[f.O5,b.Hw,y.lW,L.TO,L.KE,L.hX,R.Nt,F.dn,F.n5,F.hq,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mb[_ngcontent-%COMP%]{margin-bottom:20px}"]}),D})()},798:(x,T,t)=>{t.d(T,{v:()=>m});var o=t(1135),a=t(7579),n=t(4650);let m=(()=>{class e{constructor(){this.displayedAreas=new o.X([]),this.displayedAreas$=this.displayedAreas.asObservable(),this.newArea=new a.x,this.newArea$=this.newArea.asObservable(),this.updatedArea=new a.x,this.updatedArea$=this.updatedArea.asObservable()}updateDisplayedAreas(r){this.displayedAreas.next(r)}emitNewArea(r){this.newArea.next(r)}updateArea(r){this.updatedArea.next(r)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8259:(x,T,t)=>{t.d(T,{E:()=>m});var o=t(2340),a=t(4650),n=t(529);let m=(()=>{class e{constructor(r){this.http=r,this.baseUrl=o.N.baseUrl}getAreas(){return this.http.get(`${this.baseUrl}/area`)}createArea(r){return this.http.post(`${this.baseUrl}/area`,{...r})}updateArea(r,i){return this.http.patch(`${this.baseUrl}/area/${r}`,{...i})}deleteArea(r){return this.http.delete(`${this.baseUrl}/area/${r}`)}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(n.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5238:(x,T,t)=>{t.d(T,{G:()=>P});var o=t(7957),a=t(4006),n=t(5412),m=t(3713),e=t(4650),u=t(7533),r=t(2680),i=t(3589),d=t(8128),f=t(8259),b=t(6895),y=t(7392),L=t(4859),R=t(9549),F=t(3238),$=t(4385),W=t(4144),K=t(3546);const O=["formDirective"];function B(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del \xe1rea es "),e.TgZ(2,"strong"),e._uU(3,"obligatorio"),e.qZA()())}function D(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del debe ser de m\xednimo "),e.TgZ(2,"strong"),e._uU(3,"3"),e.qZA(),e._uU(4," caracteres "),e.qZA())}function A(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del debe ser de m\xe1ximo "),e.TgZ(2,"strong"),e._uU(3,"100"),e.qZA(),e._uU(4," caracteres "),e.qZA())}function p(h,_){if(1&h&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&h){const s=_.$implicit;e.Q6J("value",s.id),e.xp6(1),e.hij(" ",s.name,"")}}function I(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1,"Debe seleccionar un \xc1rea"),e.qZA())}let P=(()=>{class h{constructor(s,g,U,J,v,Z,l){this.data=s,this.petitionersService=g,this.petitionersStore=U,this.dialogService=J,this.dialogMessageService=v,this.areasService=Z,this.fb=l,this.matcher=new o.n,this.areas=[],this.newPetitionerForm=this.fb.group({name:["",[a.kI.required,a.kI.maxLength(100),a.kI.minLength(3)]],area:[,[a.kI.required,a.kI.min(0)]]})}ngOnInit(){this?.data?.petitioner&&(this.newPetitionerForm.get("name")?.setValue(this?.data?.petitioner?.name),this.newPetitionerForm.get("area")?.setValue(this?.data?.petitioner?.area?.id)),this.areasService.getAreas().subscribe(s=>{this.areas=s})}invalidator(s,g){return this.newPetitionerForm.controls[s].hasError(g)&&this.newPetitionerForm.controls[s].touched}requiredInputInvalidator(s){return this.invalidator(s,"required")}minLengthInputInvalidator(s){return this.invalidator(s,"minlength")}maxLengthInputInvalidator(s){return this.invalidator(s,"maxlength")}createItem(){if(!this.newPetitionerForm.invalid)return this?.data?.petitioner?this.updateItem():this.petitionersService.createPetitioner(this.newPetitionerForm.value).subscribe({next:s=>{this.petitionersStore.emitNewPetitioner({area:s.area?.name,id:s.id,name:s.name,status:s.status,options:["edit","delete"]}),this.dialogMessageService.setMessage("Solicitante creado exitosamente"),this.dialogService.openDialog({component:m.P,callback:()=>this.closeDialog()})},error:s=>{this.dialogMessageService.setMessage(s.error.message),this.dialogService.openDialog({component:m.P})}});this.newPetitionerForm.markAllAsTouched()}updateItem(){return this.petitionersService.updatePetitioner(this.data?.petitioner?.id,{...this.newPetitionerForm.value}).subscribe({next:({message:s})=>{this.petitionersStore.updatePetitioner({id:this.data?.petitioner?.id,name:this.newPetitionerForm.value.name,status:this.data?.petitioner?.status,area:this.areas.find(g=>g.id===this.newPetitionerForm.value.area)?.name,options:["edit","delete"]}),this.dialogMessageService.setMessage(s),this.dialogService.openDialog({component:m.P,callback:()=>this.closeDialog()})},error:s=>{this.dialogMessageService.setMessage(s.error.message),this.dialogService.openDialog({component:m.P})}})}closeDialog(){this.dialogService.closeDialog()}}return h.\u0275fac=function(s){return new(s||h)(e.Y36(n.WI),e.Y36(u.t),e.Y36(r.r),e.Y36(i.x),e.Y36(d.z),e.Y36(f.E),e.Y36(a.qu))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-new-petitioner"]],viewQuery:function(s,g){if(1&s&&e.Gf(O,5),2&s){let U;e.iGM(U=e.CRH())&&(g.formDirective=U.first)}},decls:27,vars:8,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["appearance","fill",1,"mt","mb"],["matInput","","type","text","placeholder","Nombre del solicitante","formControlName","name"],[4,"ngIf"],["formControlName","area",3,"errorStateMatcher"],[3,"value",4,"ngFor","ngForOf"],[1,"flex"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","type","button",3,"click"],[3,"value"]],template:function(s,g){1&s&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA(),e.TgZ(2,"mat-card-content")(3,"form",0,1),e.NdJ("ngSubmit",function(){return g.createItem()}),e.TgZ(5,"mat-form-field",2)(6,"mat-label"),e._uU(7,"Nombre"),e.qZA(),e._UZ(8,"input",3),e.YNc(9,B,4,0,"mat-error",4),e.YNc(10,D,5,0,"mat-error",4),e.YNc(11,A,5,0,"mat-error",4),e.qZA(),e.TgZ(12,"mat-form-field",2)(13,"mat-label"),e._uU(14,"\xc1rea"),e.qZA(),e.TgZ(15,"mat-select",5)(16,"mat-option"),e._uU(17,"Seleccionar"),e.qZA(),e.YNc(18,p,2,2,"mat-option",6),e.qZA(),e.YNc(19,I,2,0,"mat-error",4),e.qZA(),e.TgZ(20,"mat-card-actions",7)(21,"button",8)(22,"mat-icon"),e._uU(23,"save_alt"),e.qZA(),e._uU(24," Guardar "),e.qZA(),e.TgZ(25,"button",9),e.NdJ("click",function(){return g.closeDialog()}),e._uU(26,"Cerrar"),e.qZA()()()()),2&s&&(e.xp6(1),e.Oqu(g.data.title),e.xp6(2),e.Q6J("formGroup",g.newPetitionerForm),e.xp6(6),e.Q6J("ngIf",g.requiredInputInvalidator("name")),e.xp6(1),e.Q6J("ngIf",g.minLengthInputInvalidator("name")),e.xp6(1),e.Q6J("ngIf",g.maxLengthInputInvalidator("name")),e.xp6(4),e.Q6J("errorStateMatcher",g.matcher),e.xp6(3),e.Q6J("ngForOf",g.areas),e.xp6(1),e.Q6J("ngIf",g.requiredInputInvalidator("area")))},dependencies:[b.sg,b.O5,y.Hw,L.lW,R.TO,R.KE,R.hX,F.ey,$.gD,W.Nt,K.dn,K.n5,K.hq,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mb[_ngcontent-%COMP%]{margin-bottom:20px}"]}),h})()},2680:(x,T,t)=>{t.d(T,{r:()=>m});var o=t(1135),a=t(7579),n=t(4650);let m=(()=>{class e{constructor(){this.displayedPetitioners=new o.X([]),this.displayedPetitioners$=this.displayedPetitioners.asObservable(),this.newPetitioner=new a.x,this.newPetitioner$=this.newPetitioner.asObservable(),this.updatedPetitioner=new a.x,this.updatedPetitioner$=this.updatedPetitioner.asObservable()}updateDisplayedPetitioners(r){this.displayedPetitioners.next(r)}emitNewPetitioner(r){this.newPetitioner.next(r)}updatePetitioner(r){this.updatedPetitioner.next(r)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7533:(x,T,t)=>{t.d(T,{t:()=>m});var o=t(2340),a=t(4650),n=t(529);let m=(()=>{class e{constructor(r){this.http=r,this.baseUrl=o.N.baseUrl}getPetitioners(){return this.http.get(`${this.baseUrl}/petitioner`)}getPetitionerById(r){return this.http.get(`${this.baseUrl}/petitioner/byid/${r}`)}createPetitioner(r){return this.http.post(`${this.baseUrl}/petitioner`,{...r})}updatePetitioner(r,i){return this.http.patch(`${this.baseUrl}/petitioner/${r}`,{...i})}deletePetitioner(r){return this.http.delete(`${this.baseUrl}/petitioner/${r}`)}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(n.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2544:(x,T,t)=>{t.d(T,{I:()=>P});var o=t(4006),a=t(5412),n=t(7957),m=t(3713),e=t(4650),u=t(1720),r=t(3302),i=t(4060),d=t(3589),f=t(8128),b=t(6895),y=t(7392),L=t(4859),R=t(9549),F=t(4144),$=t(3546);const W=["formDirective"];function K(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," El email es "),e.TgZ(2,"strong"),e._uU(3,"obligatorio"),e.qZA()())}function O(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," El email no es "),e.TgZ(2,"strong"),e._uU(3,"v\xe1lido"),e.qZA()())}function B(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del \xe1rea es "),e.TgZ(2,"strong"),e._uU(3,"obligatorio"),e.qZA()())}function D(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del debe ser de m\xednimo "),e.TgZ(2,"strong"),e._uU(3,"3"),e.qZA(),e._uU(4," caracteres "),e.qZA())}function A(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del debe ser de m\xe1ximo "),e.TgZ(2,"strong"),e._uU(3,"100"),e.qZA(),e._uU(4," caracteres "),e.qZA())}function p(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," La "),e.TgZ(2,"strong"),e._uU(3,"contrase\xf1a"),e.qZA(),e._uU(4," debe de ser de 8 caracteres o m\xe1s, y tener por lo menos una "),e.TgZ(5,"strong"),e._uU(6,"may\xfascula"),e.qZA(),e._uU(7,", una "),e.TgZ(8,"strong"),e._uU(9,"min\xfascula"),e.qZA(),e._uU(10," y un "),e.TgZ(11,"strong"),e._uU(12,"n\xfamero"),e.qZA()())}function I(h,_){1&h&&(e.TgZ(0,"mat-error"),e._uU(1," La "),e.TgZ(2,"strong"),e._uU(3,"contrase\xf1a"),e.qZA(),e._uU(4," debe de ser de m\xe1ximo 20 caracteres "),e.qZA())}let P=(()=>{class h{constructor(s,g,U,J,v,Z,l){this.data=s,this.usersService=g,this.usersStore=U,this.emailValidator=J,this.dialogService=v,this.dialogMessageService=Z,this.fb=l,this.matcher=new n.n,this.passwordPlaceholder="********",this.newUserForm=this.fb.group({email:["",[o.kI.required,o.kI.pattern(this.emailValidator.emailPattern)],[this.emailValidator]],name:["",[o.kI.required,o.kI.minLength(3),o.kI.maxLength(100)]],password:["",[o.kI.minLength(6),o.kI.maxLength(20)]]})}ngOnInit(){this?.data?.user&&(this.newUserForm.get("email")?.setValue(this?.data?.user?.email),this.newUserForm.get("name")?.setValue(this?.data?.user?.name),this.newUserForm.get("password")?.setValue(this.passwordPlaceholder))}invalidator(s,g){return this.newUserForm.controls[s].hasError(g)&&this.newUserForm.controls[s].touched}requiredInputInvalidator(s){return this.invalidator(s,"required")}minLengthInputInvalidator(s){return this.invalidator(s,"minlength")}maxLengthInputInvalidator(s){return this.invalidator(s,"maxlength")}emailInputInvalidator(s){return this.invalidator(s,"pattern")}createItem(){if(!this.newUserForm.invalid)return this?.data?.user?this.updateItem():this.usersService.createUser(this.formDirective.value).subscribe({next:s=>{this.usersStore.emitNewUser({role:s.role.name,email:s.email,name:s.name,id:s.id,status:s.status,options:["edit","delete"]}),this.dialogMessageService.setMessage("Usuario creado exitosamente"),this.dialogService.openDialog({component:m.P,callback:()=>this.closeDialog()})},error:s=>{this.dialogMessageService.setMessage(s.error.message),this.dialogService.openDialog({component:m.P})}});this.newUserForm.markAllAsTouched()}updateItem(){const{email:s,password:g,name:U}=this.formDirective.value,J=g===this.passwordPlaceholder?{email:s,name:U}:{email:s,password:g,name:U};return this.usersService.updateUser(this.data?.user?.id,{...J}).subscribe({next:({message:v})=>{this.usersStore.updateUser({id:this.data?.user?.id,email:J?.email,role:this.data?.user?.role?.name,name:U,status:this.data?.user?.status,options:["edit","delete"]}),this.dialogMessageService.setMessage(v),this.dialogService.openDialog({component:m.P,callback:()=>this.closeDialog()})},error:v=>{this.dialogMessageService.setMessage(v.error.message),this.dialogService.openDialog({component:m.P})}})}closeDialog(){this.dialogService.closeDialog()}}return h.\u0275fac=function(s){return new(s||h)(e.Y36(a.WI),e.Y36(u.f),e.Y36(r.w),e.Y36(i.e),e.Y36(d.x),e.Y36(f.z),e.Y36(o.qu))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-new-user"]],viewQuery:function(s,g){if(1&s&&e.Gf(W,5),2&s){let U;e.iGM(U=e.CRH())&&(g.formDirective=U.first)}},decls:31,vars:9,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["appearance","fill",1,"mt"],["matInput","","type","text","placeholder","Descripci\xf3n del producto","formControlName","email"],[4,"ngIf"],["appearance","fill"],["matInput","","type","text","placeholder","Nombre del solicitante","formControlName","name"],["appearance","fill",1,"mt","mb"],["matInput","","type","password","placeholder","Descripci\xf3n del producto","formControlName","password"],[1,"flex"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","type","button",3,"click"]],template:function(s,g){1&s&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA(),e.TgZ(2,"mat-card-content")(3,"form",0,1),e.NdJ("ngSubmit",function(){return g.createItem()}),e.TgZ(5,"mat-form-field",2)(6,"mat-label"),e._uU(7,"Email"),e.qZA(),e._UZ(8,"input",3),e.YNc(9,K,4,0,"mat-error",4),e.YNc(10,O,4,0,"mat-error",4),e.qZA(),e.TgZ(11,"mat-form-field",5)(12,"mat-label"),e._uU(13,"Nombre"),e.qZA(),e._UZ(14,"input",6),e.YNc(15,B,4,0,"mat-error",4),e.YNc(16,D,5,0,"mat-error",4),e.YNc(17,A,5,0,"mat-error",4),e.qZA(),e.TgZ(18,"mat-form-field",7)(19,"mat-label"),e._uU(20,"Contrase\xf1a"),e.qZA(),e._UZ(21,"input",8),e.YNc(22,p,13,0,"mat-error",4),e.YNc(23,I,5,0,"mat-error",4),e.qZA(),e.TgZ(24,"mat-card-actions",9)(25,"button",10)(26,"mat-icon"),e._uU(27,"save_alt"),e.qZA(),e._uU(28," Guardar "),e.qZA(),e.TgZ(29,"button",11),e.NdJ("click",function(){return g.closeDialog()}),e._uU(30,"Cerrar"),e.qZA()()()()),2&s&&(e.xp6(1),e.Oqu(g.data.title),e.xp6(2),e.Q6J("formGroup",g.newUserForm),e.xp6(6),e.Q6J("ngIf",g.requiredInputInvalidator("email")),e.xp6(1),e.Q6J("ngIf",g.emailInputInvalidator("email")),e.xp6(5),e.Q6J("ngIf",g.requiredInputInvalidator("name")),e.xp6(1),e.Q6J("ngIf",g.minLengthInputInvalidator("name")),e.xp6(1),e.Q6J("ngIf",g.maxLengthInputInvalidator("name")),e.xp6(5),e.Q6J("ngIf",g.minLengthInputInvalidator("password")),e.xp6(1),e.Q6J("ngIf",g.maxLengthInputInvalidator("password")))},dependencies:[b.O5,y.Hw,L.lW,R.TO,R.KE,R.hX,F.Nt,$.dn,$.n5,$.hq,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.mb[_ngcontent-%COMP%]{margin-bottom:50px}"]}),h})()},3302:(x,T,t)=>{t.d(T,{w:()=>m});var o=t(1135),a=t(7579),n=t(4650);let m=(()=>{class e{constructor(){this.displayedUsers=new o.X([]),this.displayedUsers$=this.displayedUsers.asObservable(),this.newUser=new a.x,this.newUser$=this.newUser.asObservable(),this.updatedUser=new a.x,this.updatedUser$=this.updatedUser.asObservable()}updateDisplayedUsers(r){this.displayedUsers.next(r)}emitNewUser(r){this.newUser.next(r)}updateUser(r){this.updatedUser.next(r)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},1720:(x,T,t)=>{t.d(T,{f:()=>m});var o=t(2340),a=t(4650),n=t(529);let m=(()=>{class e{constructor(r){this.http=r,this.baseUrl=o.N.baseUrl}getUsers({limit:r,offset:i}){return this.http.get(`${this.baseUrl}/user?limit=${r}&offset=${i}`)}findByArticleName(r,{limit:i,offset:d}){return this.http.get(`${this.baseUrl}/user/${r}?limit=${i}&offset=${d}`)}findById(r){return this.http.get(`${this.baseUrl}/user/byid/${r}`)}getCount(){return this.http.get(`${this.baseUrl}/user/count`)}createUser(r){return this.http.post(`${this.baseUrl}/auth/register`,{...r})}updateUser(r,i){return this.http.patch(`${this.baseUrl}/user/${r}`,{...i})}deleteUser(r){return this.http.delete(`${this.baseUrl}/user/${r}`)}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(n.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},7791:(x,T,t)=>{t.d(T,{g:()=>K});var o=t(4006),a=t(3713),n=t(4650),m=t(2340),e=t(262),u=t(8505),r=t(529),i=t(8128),d=t(3589);let f=(()=>{class O{constructor(D,A,p){this.http=D,this.dialogMessageService=A,this.dialogService=p,this.baseUrl=m.N.baseUrl}searchDepartureTickets(D,{limit:A,offset:p}){return this.http.get(`${this.baseUrl}/article-exit/${D}?limit=${A}&offset=${p}`).pipe((0,u.b)(I=>(I.length||(this.dialogMessageService.setMessage("No se encontraron resultados"),this.dialogService.openDialog({component:a.P,data:{isConfirmMessage:!1}})),[])))}searchArticles(D,{limit:A,offset:p}){return this.http.get(`${this.baseUrl}/articles/${D}?limit=${A}&offset=${p}`).pipe((0,u.b)(I=>(I.length||(this.dialogMessageService.setMessage("No se encontraron resultados"),this.dialogService.openDialog({component:a.P,data:{isConfirmMessage:!1}})),[])),(0,e.K)(I=>(this.dialogMessageService.setMessage(I.error.message),this.dialogService.openDialog({component:a.P,data:{isConfirmMessage:!1}}),[])))}}return O.\u0275fac=function(D){return new(D||O)(n.LFG(r.eN),n.LFG(i.z),n.LFG(d.x))},O.\u0275prov=n.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();var b=t(6228),y=t(5134),L=t(7392),R=t(4859),F=t(9549),$=t(4144);const W=["*"];let K=(()=>{class O{constructor(D,A,p,I,P){this.searchService=D,this.searchStoreService=A,this.loadingService=p,this.dialogMessageService=I,this.dialogService=P,this.termControl=new o.NI("",[o.kI.maxLength(100)])}ngOnInit(){this.searchStoreService.value$.subscribe(D=>{this.value=D,this.termControl.setValue(this.value)})}handleInput(){this.termControl.value?.length||this.searchStoreService.updateValue(this.termControl.value),this.resetSearchTable()}resetSearchTable(){this.termControl.value.length||this.searchStoreService.updateItems([])}reset(){this.searchStoreService.updateValue(""),this.termControl.setValue("")}search(){if(!this.termControl.value?.trim().length)return this.termControl.markAllAsTouched(),this.dialogMessageService.setMessage("El texto de b\xfasqueda est\xe1 vac\xedo"),void this.dialogService.openDialog({component:a.P,data:{isConfirmMessage:!1},callback:()=>this.searchStoreService.updateValue("")});this.searchStoreService.updateValue(this.termControl.value.trim());const D=this.termControl.value,A={"departure-ticket":()=>{this.loadingService.toggleLoading(!0),this.searchService.searchDepartureTickets(D,{limit:20,offset:0}).subscribe(p=>{this.loadingService.toggleLoading(!1),this.searchStoreService.updateItems(p)})},inventory:()=>{this.loadingService.toggleLoading(!0),this.searchService.searchArticles(D,{limit:20,offset:0}).subscribe(p=>{this.loadingService.toggleLoading(!1),this.searchStoreService.updateItems(p)})},article:()=>{this.searchService.searchArticles(D,{limit:20,offset:0}).subscribe(p=>this.searchStoreService.updateItems(p))},users:()=>"",areas:()=>"",petitioners:()=>"",default:()=>""};A[this.context]?A[this.context]():A.default()}}return O.\u0275fac=function(D){return new(D||O)(n.Y36(f),n.Y36(b.y),n.Y36(y.b),n.Y36(i.z),n.Y36(d.x))},O.\u0275cmp=n.Xpm({type:O,selectors:[["app-search"]],inputs:{context:"context",findBy:"findBy"},ngContentSelectors:W,decls:12,vars:2,consts:[[1,"flex"],["appearance","fill"],["type","text","matInput","","maxlength","20","autocomplete","off",3,"formControl","input"],["mat-icon-button","","matPrefix","","type","button",3,"click"],["matPrefix",""],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matSuffix",""]],template:function(D,A){1&D&&(n.F$t(),n.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),n._uU(3),n.qZA(),n.TgZ(4,"input",2),n.NdJ("input",function(){return A.handleInput()}),n.qZA(),n.TgZ(5,"button",3),n.NdJ("click",function(){return A.reset()}),n.TgZ(6,"mat-icon",4),n._uU(7,"close"),n.qZA()(),n.TgZ(8,"button",5),n.NdJ("click",function(){return A.search()}),n.TgZ(9,"mat-icon",6),n._uU(10,"search"),n.qZA()()(),n.Hsn(11),n.qZA()),2&D&&(n.xp6(3),n.Oqu(A.findBy||"Buscar"),n.xp6(1),n.Q6J("formControl",A.termControl))},dependencies:[L.Hw,R.lW,F.KE,F.hX,F.qo,F.R9,$.Nt,o.Fj,o.JJ,o.nD,o.oH],styles:["mat-form-field[_ngcontent-%COMP%]{margin-bottom:10px}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:10px;flex-wrap:wrap}"]}),O})()},6228:(x,T,t)=>{t.d(T,{y:()=>n});var o=t(7579),a=t(4650);let n=(()=>{class m{constructor(){this.itemsFromSearch=new o.x,this.itemsFromSearch$=this.itemsFromSearch.asObservable(),this.value=new o.x,this.value$=this.value.asObservable(),this.listenDepartureTicketSearchChanges=new o.x,this.listenDepartureTicketSearchChanges$=this.listenDepartureTicketSearchChanges.asObservable()}updateItems(u){this.itemsFromSearch.next(u)}updateValue(u=""){u||(u=""),this.value.next(u)}toggleSearchListener(u,r){const i={"departure-ticket":()=>{this.listenDepartureTicketSearchChanges.next(r)},inventory:()=>{},user:()=>{},article:()=>{},area:()=>{},petitioner:()=>{},default:()=>{}};return i[u]?i[u]():i.default()}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},5609:(x,T,t)=>{t.d(T,{a:()=>k});var o=t(6400),a=t(3632),n=t(3713),m=t(2544),e=t(5098),u=t(5238),r=t(4650);const i=JSON.parse('{"id":"id","date":"fecha","time":"hora","petitioner":"solicitante","area":"area","user":"usuario","no-items-found":"No se encontraron items","description":"descripci\xf3n","stock":"stock","size":"medida","options":"opciones","amount":"cantidad","status":"estado","email":"email","role":"rol","name":"nombre","dynamic-amount":"cantidad"}');var d=t.t(i,2);let f=(()=>{class E{constructor(){this.traductions={...d}}}return E.\u0275fac=function(c){return new(c||E)},E.\u0275prov=r.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();var b=t(5134),y=t(7881),L=t(3589),R=t(8128),F=t(5804),$=t(9215),W=t(1720),K=t(8259),O=t(7533),B=t(6228),D=t(6895),A=t(7392),p=t(4859),I=t(7155),P=t(1572);const h=["dynamicAmount"];function _(E,N){1&E&&(r.TgZ(0,"div",8),r._UZ(1,"mat-spinner"),r.qZA())}function s(E,N){if(1&E&&(r.TgZ(0,"th",12),r._uU(1),r.ALo(2,"titlecase"),r.ALo(3,"i18nSelect"),r.qZA()),2&E){const c=r.oxw().$implicit,M=r.oxw();r.xp6(1),r.hij(" ",r.lcZ(2,1,r.xi3(3,3,c,M.traductions))," ")}}function g(E,N){if(1&E){const c=r.EpF();r.TgZ(0,"button",18),r.NdJ("click",function(){const w=r.CHM(c).$implicit,Q=r.oxw(2).$implicit,G=r.oxw(2);return r.KtG(G.handleOptions(Q,w))}),r.TgZ(1,"mat-icon"),r._uU(2),r.qZA()()}if(2&E){const c=N.$implicit;r.xp6(2),r.Oqu(c)}}function U(E,N){if(1&E&&(r.TgZ(0,"div",16),r.YNc(1,g,3,1,"button",17),r.qZA()),2&E){const c=r.oxw().$implicit;r.Q6J("ngSwitch",c.options),r.xp6(1),r.Q6J("ngForOf",c.options)}}function J(E,N){if(1&E&&r._uU(0),2&E){const c=r.oxw().$implicit,M=r.oxw().$implicit;r.hij(" ",c[M]," ")}}function v(E,N){if(1&E&&(r.TgZ(0,"td",13),r.YNc(1,U,2,2,"div",14),r.YNc(2,J,1,1,"ng-template",null,15,r.W1O),r.qZA()),2&E){const c=r.MAs(3),M=r.oxw(),C=M.last,w=M.$implicit;r.xp6(1),r.Q6J("ngIf",C&&"options"===w)("ngIfElse",c)}}function Z(E,N){1&E&&(r.ynx(0,9),r.YNc(1,s,4,6,"th",10),r.YNc(2,v,4,2,"td",11),r.BQk()),2&E&&r.Q6J("matColumnDef",N.$implicit)}function l(E,N){1&E&&r._UZ(0,"tr",19)}function S(E,N){1&E&&r._UZ(0,"tr",20)}function Y(E,N){if(1&E&&(r.TgZ(0,"tr",21)(1,"td",22),r._uU(2),r.qZA()()),2&E){const c=r.oxw();r.xp6(1),r.uIk("colspan",c.displayedColumns.length),r.xp6(1),r.Oqu(c.errorMsg)}}let k=(()=>{class E{constructor(c,M,C,w,Q,G,j,z,V,H,X){this.t=c,this.loadingService=M,this.tableStoreService=C,this.dialogService=w,this.dialogMessageService=Q,this.departureTicketService=G,this.inventoryService=j,this.usersService=z,this.areasService=V,this.petitionersService=H,this.searchStoreService=X,this.displayedColumns=[],this.dataToDisplay=[],this.errorMsg="No hay items",this.isLoadingResults=!0,this.traductions=this.t.traductions}ngOnInit(){this.loadingService.isLoading$.subscribe(c=>{this.isLoadingResults=c}),this.tableStoreService.tableContext$.subscribe(c=>{this.tableContext=c})}ngAfterViewInit(){}add(c){const M={"departure-ticket":()=>{},inventory:()=>{},user:()=>{},article:()=>{this.tableStoreService.setSelectedRow(c)},area:()=>{},petitioner:()=>{},default:()=>{}};return M[this.tableContext]?M[this.tableContext]():M.default()}delete(c){let M;const C={"departure-ticket":()=>{this.dialogMessageService.setMessageContext("confirmDeleteDepartureTicket"),this.dialogMessageService.setMessage(`\xbfSeguro quieres eliminar el vale de salida con el id: ${c.id}?`),this.dialogService.openDialog({component:n.P,data:{isConfirmMessage:!0,departureTicket:c},callback:()=>{this.confirmMessageSubs||(this.confirmMessageSubs=this.dialogMessageService.confirmMessage$.subscribe(w=>{this.dialogService.closeDialog(),w&&(M=this.departureTicketService.deleteDepartureTicket(c.id).subscribe(()=>{this.dialogMessageService.setMessage("Vale de salida eliminado exitosamente"),this.dialogService.openDialog({component:n.P,callback:()=>{this.confirmMessageSubs?.unsubscribe(),M?.unsubscribe()}})}))}))}})},inventory:()=>{this.dialogMessageService.setMessageContext("confirmDeleteArticle"),this.dialogMessageService.setMessage(`\xbfSeguro quieres eliminar el art\xedculo con el id: ${c.id}?`),this.dialogService.openDialog({component:n.P,data:{isConfirmMessage:!0,departureTicket:c},callback:()=>{this.confirmMessageSubs||(this.confirmMessageSubs=this.dialogMessageService.confirmMessage$.subscribe(w=>{this.dialogService.closeDialog(),w&&(M=this.inventoryService.delete(c.id).subscribe(()=>{this.dialogMessageService.setMessage("Art\xedculo eliminado exitosamente"),this.dialogService.openDialog({component:n.P,callback:()=>{this.confirmMessageSubs?.unsubscribe(),M?.unsubscribe()}})}))}))}})},user:()=>{this.dialogMessageService.setMessageContext("confirmDeleteUser"),this.dialogMessageService.setMessage(`\xbfSeguro quieres eliminar el art\xedculo con el id: ${c.id}?`),this.dialogService.openDialog({component:n.P,data:{isConfirmMessage:!0,user:c},callback:()=>{this.confirmMessageSubs||(this.confirmMessageSubs=this.dialogMessageService.confirmMessage$.subscribe(w=>{this.dialogService.closeDialog(),w&&(M=this.usersService.deleteUser(c.id).subscribe(()=>{this.dialogMessageService.setMessage("Art\xedculo eliminado exitosamente"),this.dialogService.openDialog({component:n.P,callback:()=>{this.confirmMessageSubs?.unsubscribe(),M?.unsubscribe()}})}))}))}})},article:()=>{this.tableStoreService.removeSelectedRow(c)},area:()=>{this.dialogMessageService.setMessageContext("confirmDeleteArea"),this.dialogMessageService.setMessage(`\xbfSeguro quieres eliminar el \xe1rea con el id: ${c.id}?`),this.dialogService.openDialog({component:n.P,data:{isConfirmMessage:!0,area:c},callback:()=>{this.confirmMessageSubs||(this.confirmMessageSubs=this.dialogMessageService.confirmMessage$.subscribe(w=>{this.dialogService.closeDialog(),w&&(M=this.areasService.deleteArea(c.id).subscribe(()=>{this.dialogMessageService.setMessage("\xc1rea eliminada exitosamente"),this.dialogService.openDialog({component:n.P,callback:()=>{this.confirmMessageSubs?.unsubscribe(),M?.unsubscribe()}})}))}))}})},petitioner:()=>{this.dialogMessageService.setMessageContext("confirmDeletePetitioner"),this.dialogMessageService.setMessage(`\xbfSeguro quieres eliminar el solicitante con el id: ${c.id}?`),this.dialogService.openDialog({component:n.P,data:{isConfirmMessage:!0,petitioner:c},callback:()=>{this.confirmMessageSubs||(this.confirmMessageSubs=this.dialogMessageService.confirmMessage$.subscribe(w=>{this.dialogService.closeDialog(),w&&(M=this.petitionersService.deletePetitioner(c.id).subscribe(()=>{this.dialogMessageService.setMessage("\xc1rea eliminada exitosamente"),this.dialogService.openDialog({component:n.P,callback:()=>{this.confirmMessageSubs?.unsubscribe(),M?.unsubscribe()}})}))}))}})},default:()=>{}};return C[this.tableContext]?C[this.tableContext]():C.default()}edit(c){const M={"departure-ticket":()=>{this.tableStoreService.toggleListenRowToRemove(!1),this.searchStoreService.toggleSearchListener("departure-ticket",!1),this.tableStoreService.setSelectedRow(c),this.tableStoreService.setTableContext("article"),this.departureTicketService.findById(c.id).subscribe(C=>{this.dialogService.openDialog({component:o.$,data:{isDepartureTicket:!0,area:C.area,petitioner:C.petitioner,departureTicketId:C.id,selectedArticles:C.articleExitDetail.map(w=>(w.article.amount=+w.amount,w.article)),title:"Actualizar vale de salida"},callback:()=>{this.tableStoreService.setTableContext("departure-ticket"),this.tableStoreService.toggleListenRowToRemove(!0),this.searchStoreService.toggleSearchListener("departure-ticket",!0)}})})},inventory:()=>{this.inventoryService.findByIdOrDescription({term:c.id}).subscribe(C=>{this.dialogService.openDialog({component:a.R,data:{article:C,title:"Editar art\xedculo"},callback:()=>this.tableStoreService.setTableContext("inventory")})})},user:()=>{this.usersService.findById(c.id).subscribe(C=>{this.dialogService.openDialog({component:m.I,data:{user:C,title:"Editar Usuario"},callback:()=>this.tableStoreService.setTableContext("user")})})},article:()=>{this.tableStoreService.removeSelectedRow(c)},area:()=>{this.dialogService.openDialog({component:e.W,data:{area:c,title:"Editar \xc1rea"},callback:()=>this.tableStoreService.setTableContext("area")})},petitioner:()=>{this.petitionersService.getPetitionerById(c.id).subscribe(C=>{this.dialogService.openDialog({component:u.G,data:{petitioner:C,title:"Editar Solicitante"},callback:()=>this.tableStoreService.setTableContext("petitioner")})})},default:()=>{}};return M[this.tableContext]?M[this.tableContext]():M.default()}report(c){this.inventoryService.getReport("exit",c.id).subscribe(M=>{const C=URL.createObjectURL(M);window.open(C,"_blank")})}handleOptions(c,M){const C={add:()=>this.add(c),edit:()=>this.edit(c),picture_as_pdf:()=>this.report(c),delete:()=>this.delete(c),default:()=>{}};return C[M]?C[M]():C.default()}}return E.\u0275fac=function(c){return new(c||E)(r.Y36(f),r.Y36(b.b),r.Y36(y.B),r.Y36(L.x),r.Y36(R.z),r.Y36(F.G),r.Y36($.V),r.Y36(W.f),r.Y36(K.E),r.Y36(O.t),r.Y36(B.y))},E.\u0275cmp=r.Xpm({type:E,selectors:[["app-table"]],viewQuery:function(c,M){if(1&c&&r.Gf(h,5),2&c){let C;r.iGM(C=r.CRH())&&(M.dynamicAmount=C.first)}},inputs:{displayedColumns:"displayedColumns",dataToDisplay:"dataToDisplay",errorMsg:"errorMsg",optionsTemplateRef:"optionsTemplateRef"},decls:8,vars:6,consts:[[1,"container"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","",1,"example-table",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"example-loading-shade"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"ngSwitch",4,"ngIf","ngIfElse"],["rawData",""],[3,"ngSwitch"],["mat-icon-button","","type","button",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","","type","button",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mat-cell"]],template:function(c,M){1&c&&(r.TgZ(0,"div",0),r.YNc(1,_,2,0,"div",1),r.TgZ(2,"div",2)(3,"table",3),r.YNc(4,Z,3,1,"ng-container",4),r.YNc(5,l,1,0,"tr",5),r.YNc(6,S,1,0,"tr",6),r.YNc(7,Y,3,2,"tr",7),r.qZA()()()),2&c&&(r.xp6(1),r.Q6J("ngIf",M.isLoadingResults),r.xp6(2),r.Q6J("dataSource",M.dataToDisplay),r.xp6(1),r.Q6J("ngForOf",M.displayedColumns),r.xp6(1),r.Q6J("matHeaderRowDef",M.displayedColumns)("matHeaderRowDefSticky",!0),r.xp6(1),r.Q6J("matRowDefColumns",M.displayedColumns))},dependencies:[D.sg,D.O5,D.RF,A.Hw,p.lW,I.BZ,I.fO,I.as,I.w1,I.Dz,I.nj,I.ge,I.ev,I.XQ,I.Gk,I.Ee,P.Ou,D.rS,D._K],styles:["button[_ngcontent-%COMP%]{margin:16px 8px}.container[_ngcontent-%COMP%]{position:relative}.example-table-container[_ngcontent-%COMP%]{position:relative;overflow:auto}table[_ngcontent-%COMP%]{width:100%}.example-loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}.example-rate-limit-reached[_ngcontent-%COMP%]{max-width:360px;text-align:center}.mat-column-number[_ngcontent-%COMP%], .mat-column-state[_ngcontent-%COMP%]{max-width:64px}.mat-column-created[_ngcontent-%COMP%]{max-width:124px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:center!important;vertical-align:middle!important}.mat-sort-header-container[_ngcontent-%COMP%]{justify-content:center!important}"]}),E})()},7957:(x,T,t)=>{t.d(T,{n:()=>o});class o{isErrorState(n,m){return!!(n&&n.invalid&&(n.dirty||n.touched||m&&m.submitted))}}},5134:(x,T,t)=>{t.d(T,{b:()=>n});var o=t(1135),a=t(4650);let n=(()=>{class m{constructor(){this.isLoading=new o.X(!1),this.isLoading$=this.isLoading.asObservable()}toggleLoading(u){this.isLoading.next(u)}}return m.\u0275fac=function(u){return new(u||m)},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},4020:(x,T,t)=>{t.d(T,{H:()=>m});var o=t(2340),a=t(4650),n=t(529);let m=(()=>{class e{constructor(r){this.http=r,this.baseUrl=o.N.baseUrl}getPetitionersByAreaId(r){return this.http.get(`${this.baseUrl}/petitioner/${r}`)}getPetitionerById(r){return this.http.get(`${this.baseUrl}/petitioner/byid/${r}`)}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(n.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},4060:(x,T,t)=>{t.d(T,{e:()=>m});var o=t(9646),a=t(4650),n=t(529);let m=(()=>{class e{constructor(r){this.http=r,this.emailPattern=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i}validate(r){return(0,o.of)(null)}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(n.eN))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8442:(x,T,t)=>{t.d(T,{G:()=>u});var o=t(5412),a=t(4650),n=t(4020),m=t(8128),e=t(3589);let u=(()=>{class r{constructor(d,f,b,y){this.data=d,this.petitionerService=f,this.dialogMessageService=b,this.dialogService=y,this.articlesToConfirmColumns=["id","description","stock","size","amount"]}ngOnInit(){this.petitionerSubs=this.petitionerService.getPetitionerById(this.data.departureTicket.petitionerId).subscribe(d=>{this.petitioner=d}),this.articlesToConfirm=this.data.departureTicket.articles.map(d=>{const{options:f,...b}=d;return b})}ngOnDestroy(){this.petitionerSubs.unsubscribe()}closeDialog(d){this.dialogMessageService.toggleConfirmMessage(d),this.dialogService.closeDialog()}}return r.\u0275fac=function(d){return new(d||r)(a.Y36(o.WI),a.Y36(n.H),a.Y36(m.z),a.Y36(e.x))},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-confirm-departure-ticket"]],decls:16,vars:4,consts:[[3,"displayedColumns","dataToDisplay"],[1,"flex"],["mat-raised-button","","color","primary","type","button",3,"click"],["mat-raised-button","","type","button",3,"click"]],template:function(d,f){1&d&&(a.TgZ(0,"mat-card")(1,"mat-card-title"),a._uU(2,"Confirmar vale de salida"),a.qZA(),a.TgZ(3,"mat-card-content")(4,"p"),a._uU(5),a.qZA(),a.TgZ(6,"p"),a._uU(7),a.qZA(),a._UZ(8,"app-table",0),a.qZA(),a.TgZ(9,"mat-card-actions",1)(10,"button",2),a.NdJ("click",function(){return f.closeDialog(!0)}),a.TgZ(11,"mat-icon"),a._uU(12,"save_alt"),a.qZA(),a._uU(13," Confirmar "),a.qZA(),a.TgZ(14,"button",3),a.NdJ("click",function(){return f.closeDialog(!1)}),a._uU(15,"Cancelar todo"),a.qZA()()()),2&d&&(a.xp6(5),a.hij("\xc1rea: ",null==f.petitioner||null==f.petitioner.area?null:f.petitioner.area.name,""),a.xp6(2),a.hij("Solicitante: ",null==f.petitioner?null:f.petitioner.name,""),a.xp6(1),a.Q6J("displayedColumns",f.articlesToConfirmColumns)("dataToDisplay",f.articlesToConfirm))},styles:[".flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),r})()},6400:(x,T,t)=>{t.d(T,{$:()=>J});var o=t(4006),a=t(262),n=t(9646),m=t(3713),e=t(5412),u=t(7957),r=t(8442),i=t(4650),d=t(3589),f=t(5804),b=t(2340),y=t(529);let L=(()=>{class v{constructor(l){this.http=l,this.baseUrl=b.N.baseUrl}getAreas(){return this.http.get(`${this.baseUrl}/area`)}}return v.\u0275fac=function(l){return new(l||v)(i.LFG(y.eN))},v.\u0275prov=i.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})();var R=t(4020),F=t(6228),$=t(7881),W=t(8128),K=t(737),O=t(1928),B=t(4159);function D(v,Z){if(1&v){const l=i.EpF();i.TgZ(0,"mat-option",19),i.NdJ("click",function(){const k=i.CHM(l).$implicit,E=i.oxw();return i.KtG(E.getPetitioners(k.id))}),i._uU(1),i.qZA()}if(2&v){const l=Z.$implicit;i.Q6J("value",l.id),i.xp6(1),i.hij(" ",l.name,"")}}function A(v,Z){1&v&&(i.TgZ(0,"mat-error"),i._uU(1,"Debe seleccionar un \xc1rea"),i.qZA())}function p(v,Z){if(1&v&&(i.TgZ(0,"mat-option",21),i._uU(1),i.qZA()),2&v){const l=Z.$implicit;i.Q6J("value",l.petitioner_id),i.xp6(1),i.hij(" ",l.petitioner_name," ")}}function I(v,Z){if(1&v&&(i.ynx(0),i.YNc(1,p,2,2,"mat-option",20),i.BQk()),2&v){const l=i.oxw();i.xp6(1),i.Q6J("ngForOf",l.petitioners)}}function P(v,Z){if(1&v&&(i.TgZ(0,"mat-option",21),i._uU(1),i.qZA()),2&v){const l=i.oxw();i.Q6J("value",null==l.data||null==l.data.petitioner?null:l.data.petitioner.id),i.xp6(1),i.hij(" ",null==l.data||null==l.data.petitioner?null:l.data.petitioner.name," ")}}function h(v,Z){1&v&&(i.TgZ(0,"mat-error"),i._uU(1,"Debe seleccionar un Solicitante"),i.qZA())}function _(v,Z){1&v&&(i.TgZ(0,"mat-error"),i._uU(1," La cantidad debe ser mayor o igual a 0 "),i.qZA())}function s(v,Z){1&v&&(i.TgZ(0,"mat-error"),i._uU(1," La cantidad m\xe1xima es de "),i.TgZ(2,"strong"),i._uU(3,"10000"),i.qZA(),i._uU(4," unidades "),i.qZA())}function g(v,Z){1&v&&(i.TgZ(0,"mat-error"),i._uU(1," Las existencias son "),i.TgZ(2,"strong"),i._uU(3,"obligatorias"),i.qZA()())}function U(v,Z){1&v&&(i.TgZ(0,"mat-error"),i._uU(1," La cantidad debe ser un n\xfamero entero "),i.TgZ(2,"strong"),i._uU(3,"v\xe1lido"),i.qZA()())}let J=(()=>{class v{constructor(l,S,Y,k,E,N,c,M,C,w,Q,G){this.data=l,this.dialogService=S,this.fb=Y,this.departureTicketService=k,this.areaService=E,this.petitionerService=N,this.searchStoreService=c,this.tableStoreService=M,this.dialogMessageService=C,this.departureTicketStore=w,this.localStorageService=Q,this.authService=G,this.matcher=new u.n,this.newItemForm=this.fb.group({area:[,[o.kI.required,o.kI.min(0)]],petitioner:[,[o.kI.required]],amount:[,[o.kI.required,o.kI.pattern(/^[1-9]\d*$/)]]}),this.areas=[],this.petitioners=[],this.articlesFromSearchColumns=["id","description","stock","size","dynamic-amount","options"],this.articlesToUpdateColumns=["id","description","stock","size","amount","options"],this.selectedArticles=[];const j=new Date;this.dateValue=`${j.getMonth()+1}/${j.getDate()}/${j.getFullYear()}`}ngOnInit(){this.userStatusSubs=this.authService.adminStatus().subscribe(l=>{this.isAdmin=l}),this.tableStoreService.setTableContext("article"),this.data.selectedArticles&&(this.selectedArticles=this.data.selectedArticles,this.selectedArticles=this.data.selectedArticles.map(l=>(l.options=["delete"],l))),this.displayedDepartureTicketsSubs=this.departureTicketStore.displayedDepartureTickets$.subscribe(l=>{this.displayedDepartureTickets=[...l]}),this.areaService.getAreas().subscribe(l=>{if(this.areas=l,!this?.data?.area)return this.disablePetittionerOptions();this.newItemForm.get("area")?.setValue(this?.data?.area?.id),this.newItemForm.get("petitioner")?.setValue(this?.data?.petitioner?.id)}),this.itemsFromSearchSubs=this.searchStoreService.itemsFromSearch$.subscribe(l=>{this.articlesFromSearch=l.length?l:[l],this.articlesFromSearch=this.articlesFromSearch.map(S=>(S.options=["add"],S))}),this.selectedRowSubs=this.tableStoreService.selectedRow$.subscribe(l=>{if(!l)return;if(this.selectedArticle=l,l.stock<this.newItemForm.get("amount")?.value)return this.dialogMessageService.setMessage("La cantidad no puede ser mayor al stock del art\xedculo"),this.dialogService.openDialog({component:m.P});if(this.selectedArticles.some(Y=>l.id===Y.id))return;if(this.newItemForm.invalid)return void this.newItemForm.get("amount")?.markAsTouched();let S={...l};S.options=["delete"],S.amount=this.newItemForm.get("amount")?.value,this.selectedArticles.push(S),this.selectedArticles=[...this.selectedArticles],this.newItemForm.get("amount")?.reset()}),this.rowToRemoveSubs=this.tableStoreService.rowToRemove$.subscribe(l=>{if(!this.selectedArticles.length)return;const S=this.selectedArticles.findIndex(Y=>Y.id===l?.id);this.selectedArticles.splice(S,1),this.selectedArticles=[...this.selectedArticles],this.newItemForm.get("amount")?.markAsTouched()}),this.isConfirmedSubs=this.dialogMessageService.confirmMessage$.subscribe(l=>{this.isConfirmed=l})}ngOnDestroy(){this.tableStoreService.setSelectedRow(null),this.searchStoreService.updateItems([]),this.itemsFromSearchSubs?.unsubscribe(),this.rowToRemoveSubs?.unsubscribe(),this.selectedRowSubs?.unsubscribe(),this.displayedDepartureTicketsSubs?.unsubscribe(),this.userStatusSubs?.unsubscribe()}getPetitioners(l){this.enablePetittionerOptions(),this.petitionerService.getPetitionersByAreaId(l).pipe((0,a.K)(S=>(0,n.of)([]))).subscribe(S=>{if(!S.length)return this.disablePetittionerOptions();this.petitioners=S})}enablePetittionerOptions(){this.newItemForm.get("petitioner")?.enable()}disablePetittionerOptions(){this.newItemForm.get("petitioner")?.disable(),this.newItemForm.get("petitioner")?.reset()}invalidator(l,S){return this.newItemForm.controls[l].hasError(S)&&this.newItemForm.controls[l].touched}requiredInputInvalidator(l){return this.invalidator(l,"required")}intInputInvalidator(l){return this.invalidator(l,"pattern")}minLengthInputInvalidator(l){return this.invalidator(l,"minlength")}minCuantityInputInvalidator(l){return this.invalidator(l,"min")}maxCuantityInputInvalidator(l){return this.invalidator(l,"max")}submit(){if(this.newItemForm.get("area")?.invalid||this.newItemForm.get("petitioner")?.invalid||!this.selectedArticles.length)return this.newItemForm.markAllAsTouched(),this.dialogMessageService.setMessage("No puedes crear o editar un vale de salida sin art\xedculos seleccionados"),void this.dialogService.openDialog({component:m.P});const{amount:l,...S}=this.newItemForm.value;this.dialogService.openDialog({component:r.G,data:{departureTicket:{areaId:S.area,petitionerId:S.petitioner,articles:this.selectedArticles}},callback:()=>{if(this.isConfirmed){if(this?.data?.isDepartureTicket)return this.updateItem();this.createItem()}},sizes:{minWidth:"80%"}})}createItem(){this.departureTicketService.createDepartureTicket({idPetitioner:this.newItemForm.get("petitioner")?.value,idArea:this.newItemForm.get("area")?.value,idUser:this.localStorageService.getItem("user").id,articleExitDetails:this.selectedArticles.map(l=>({idArticle:l.id||0,amount:l.amount||0}))}).subscribe(l=>{this.closeDialog(),this.displayedDepartureTickets.length<25&&this.departureTicketStore.emitNewDepartureTicket({id:l.id,date:l.date,time:l.time,petitioner:l.petitioner.name,area:l.area.name,user:l.user.email,options:this.isAdmin?["edit","picture_as_pdf","delete"]:["edit","picture_as_pdf"]}),this.dialogMessageService.setMessage("Vale de salida realizado exitosamente"),this.dialogService.openDialog({component:m.P})})}updateItem(){this.departureTicketService.updateDepartureTicket(this.data.departureTicketId,{idPetitioner:this.newItemForm.get("petitioner")?.value,idArea:this.newItemForm.get("area")?.value,idUser:this.localStorageService.getItem("user").id,articleExitDetails:this.selectedArticles.map(l=>({idArticle:l.id||0,amount:l.amount||0}))}).subscribe(l=>{this.closeDialog(),this.departureTicketStore.updateDepartureTicket({id:this.data.departureTicketId,date:l.date,time:l.time,petitioner:l.petitioner?.name,area:l.petitioner?.area?.name,user:l.user?.email,options:["edit","picture_as_pdf","delete"]}),this.dialogMessageService.setMessage("Vale de salida actualizado exitosamente"),this.dialogService.openDialog({component:m.P})})}closeDialog(){this.dialogService.closeDialog()}}return v.\u0275fac=function(l){return new(l||v)(i.Y36(e.WI),i.Y36(d.x),i.Y36(o.qu),i.Y36(f.G),i.Y36(L),i.Y36(R.H),i.Y36(F.y),i.Y36($.B),i.Y36(W.z),i.Y36(K.y),i.Y36(O.n),i.Y36(B.e))},v.\u0275cmp=i.Xpm({type:v,selectors:[["app-new-departure-ticket"]],decls:46,vars:19,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["appearance","fill"],["matInput","","disabled","",3,"value"],["appearance","fill",1,"mt"],["formControlName","area",3,"errorStateMatcher"],[3,"click"],[3,"value","click",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","petitioner",3,"errorStateMatcher"],[4,"ngIf","ngIfElse"],["fromDialogData",""],["appearance","fill",1,"mb"],["matInput","","type","number","placeholder","Existencias del producto","autocomplete","off","formControlName","amount","min","0","max","10000"],["findBy","Buscar art\xedculos por descripci\xf3n",3,"context"],[3,"dataToDisplay","displayedColumns"],[1,"flex"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","type","button",3,"click"],[3,"value","click"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(l,S){if(1&l&&(i.TgZ(0,"mat-card")(1,"mat-card-title"),i._uU(2),i.qZA(),i.TgZ(3,"mat-card-content")(4,"form",0,1),i.NdJ("ngSubmit",function(){return S.submit()}),i.TgZ(6,"mat-form-field",2)(7,"mat-label"),i._uU(8,"Fecha"),i.qZA(),i._UZ(9,"input",3),i.qZA(),i.TgZ(10,"mat-form-field",4)(11,"mat-label"),i._uU(12,"\xc1rea"),i.qZA(),i.TgZ(13,"mat-select",5)(14,"mat-option",6),i.NdJ("click",function(){return S.disablePetittionerOptions()}),i._uU(15,"Seleccionar"),i.qZA(),i.YNc(16,D,2,2,"mat-option",7),i.qZA(),i.YNc(17,A,2,0,"mat-error",8),i.qZA(),i.TgZ(18,"mat-form-field",4)(19,"mat-label"),i._uU(20,"Solicitante"),i.qZA(),i.TgZ(21,"mat-select",9)(22,"mat-option"),i._uU(23,"Seleccionar"),i.qZA(),i.YNc(24,I,2,1,"ng-container",10),i.YNc(25,P,2,2,"ng-template",null,11,i.W1O),i.qZA(),i.YNc(27,h,2,0,"mat-error",8),i.qZA(),i.TgZ(28,"mat-form-field",12)(29,"mat-label"),i._uU(30,"Cantidad"),i.qZA(),i._UZ(31,"input",13),i.YNc(32,_,2,0,"mat-error",8),i.YNc(33,s,5,0,"mat-error",8),i.YNc(34,g,4,0,"mat-error",8),i.YNc(35,U,4,0,"mat-error",8),i.qZA(),i._UZ(36,"app-search",14)(37,"app-table",15)(38,"app-table",15),i.TgZ(39,"mat-card-actions",16)(40,"button",17)(41,"mat-icon"),i._uU(42,"save_alt"),i.qZA(),i._uU(43," Guardar "),i.qZA(),i.TgZ(44,"button",18),i.NdJ("click",function(){return S.closeDialog()}),i._uU(45,"Cerrar"),i.qZA()()()()()),2&l){const Y=i.MAs(26);i.xp6(2),i.Oqu(S.data.title),i.xp6(2),i.Q6J("formGroup",S.newItemForm),i.xp6(5),i.Q6J("value",S.dateValue),i.xp6(4),i.Q6J("errorStateMatcher",S.matcher),i.xp6(3),i.Q6J("ngForOf",S.areas),i.xp6(1),i.Q6J("ngIf",S.requiredInputInvalidator("area")),i.xp6(4),i.Q6J("errorStateMatcher",S.matcher),i.xp6(3),i.Q6J("ngIf",!!S.petitioners.length)("ngIfElse",Y),i.xp6(3),i.Q6J("ngIf",S.requiredInputInvalidator("petitioner")),i.xp6(5),i.Q6J("ngIf",S.minCuantityInputInvalidator("amount")),i.xp6(1),i.Q6J("ngIf",S.maxCuantityInputInvalidator("amount")),i.xp6(1),i.Q6J("ngIf",S.requiredInputInvalidator("amount")),i.xp6(1),i.Q6J("ngIf",S.intInputInvalidator("amount")),i.xp6(1),i.Q6J("context","article"),i.xp6(1),i.Q6J("dataToDisplay",S.articlesFromSearch)("displayedColumns",S.articlesFromSearchColumns),i.xp6(1),i.Q6J("dataToDisplay",S.selectedArticles)("displayedColumns",S.articlesToUpdateColumns)}},styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}app-table[_ngcontent-%COMP%]{margin:20px}.mb[_ngcontent-%COMP%]{margin-bottom:50px}"]}),v})()},5804:(x,T,t)=>{t.d(T,{G:()=>u});var o=t(2340),a=t(8505),n=t(4004),m=t(4650),e=t(529);let u=(()=>{class r{constructor(d){this.http=d,this.baseUrl=o.N.baseUrl}getDepartureTickets({limit:d,offset:f}){return this.http.get(`${this.baseUrl}/article-exit?limit=${d}&offset=${f}`).pipe((0,a.b)(b=>console.log(b)),(0,n.U)(b=>b.map(y=>({...y,date:this.getDate(new Date(y.date)),time:this.getHour(new Date(y.time))}))))}findByArticleName(d,{limit:f,offset:b}){return this.http.get(`${this.baseUrl}/article-exit/${d}?limit=${f}&offset=${b}`).pipe((0,n.U)(y=>y.map(L=>({...L,date:this.getDate(new Date(L.date)),time:this.getHour(new Date(L.time))}))))}findById(d){return this.http.get(`${this.baseUrl}/article-exit/byid/${d}`).pipe((0,n.U)(f=>({...f,date:this.getDate(new Date(f.date)),time:this.getHour(new Date(f.time))})))}getCount(){return this.http.get(`${this.baseUrl}/article-exit/count`)}createDepartureTicket(d){return this.http.post(`${this.baseUrl}/article-exit`,{...d}).pipe((0,n.U)(f=>({...f,date:this.getDate(new Date(f.date)),time:this.getHour(new Date(f.time))})))}updateDepartureTicket(d,f){return this.http.patch(`${this.baseUrl}/article-exit/${d}`,{...f}).pipe((0,n.U)(b=>({...b,date:this.getDate(new Date(b.date)),time:this.getHour(new Date(b.time))})))}deleteDepartureTicket(d){return this.http.delete(`${this.baseUrl}/article-exit/${d}`)}getHour(d){return d.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")}getDate(d){let f=new Intl.DateTimeFormat("es",{year:"numeric"}).format(d),b=new Intl.DateTimeFormat("es",{month:"short"}).format(d);return`${new Intl.DateTimeFormat("es",{day:"2-digit"}).format(d)}-${b}-${f}`}}return r.\u0275fac=function(d){return new(d||r)(m.LFG(e.eN))},r.\u0275prov=m.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},737:(x,T,t)=>{t.d(T,{y:()=>m});var o=t(1135),a=t(7579),n=t(4650);let m=(()=>{class e{constructor(){this.displayedDepartureTickets=new o.X([]),this.displayedDepartureTickets$=this.displayedDepartureTickets.asObservable(),this.newDepartureTicket=new a.x,this.newDepartureTicket$=this.newDepartureTicket.asObservable(),this.updatedDepartureTicket=new a.x,this.updatedDepartureTicket$=this.updatedDepartureTicket.asObservable()}updateDisplayedDepartureTickets(r){this.displayedDepartureTickets.next(r)}emitNewDepartureTicket(r){this.newDepartureTicket.next(r)}updateDepartureTicket(r){this.updatedDepartureTicket.next(r)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3632:(x,T,t)=>{t.d(T,{R:()=>I});var o=t(4006),a=t(5412),n=t(3713),m=t(7957),e=t(4650),u=t(9215),r=t(8762),i=t(3589),d=t(8128),f=t(6895),b=t(7392),y=t(4859),L=t(9549),R=t(3238),F=t(4385),$=t(4144),W=t(3546);const K=["formDirective"];function O(P,h){1&P&&(e.TgZ(0,"mat-error"),e._uU(1," La descripci\xf3n es "),e.TgZ(2,"strong"),e._uU(3,"obligatoria"),e.qZA()())}function B(P,h){1&P&&(e.TgZ(0,"mat-error"),e._uU(1," La descripci\xf3n debe ser de m\xe1s de "),e.TgZ(2,"strong"),e._uU(3,"3"),e.qZA(),e._uU(4," caracteres "),e.qZA())}function D(P,h){1&P&&(e.TgZ(0,"mat-error"),e._uU(1," Las existencias deben ser mayores o iguales a 0 "),e.qZA())}function A(P,h){1&P&&(e.TgZ(0,"mat-error"),e._uU(1," Las existencias son "),e.TgZ(2,"strong"),e._uU(3,"obligatorias"),e.qZA()())}function p(P,h){1&P&&(e.TgZ(0,"mat-error"),e._uU(1," Las medidas son "),e.TgZ(2,"strong"),e._uU(3,"obligatorias"),e.qZA()())}let I=(()=>{class P{constructor(_,s,g,U,J,v){this.data=_,this.inventoryService=s,this.inventoryStore=g,this.dialogService=U,this.dialogMessageService=J,this.fb=v,this.matcher=new m.n,this.newArticleForm=this.fb.group({description:[,[o.kI.required,o.kI.minLength(3),o.kI.maxLength(50)]],stock:[,[o.kI.required,o.kI.pattern(/^[0-9]\d*$/)]],size:[,[o.kI.required,o.kI.minLength(3),o.kI.maxLength(50)]]})}ngOnInit(){this.data.selectedArticle&&this.newArticleForm.setValue(this.data.selectedArticle),this?.data?.article&&(this.newArticleForm.get("description")?.setValue(this?.data?.article?.description),this.newArticleForm.get("stock")?.setValue(this?.data?.article?.stock),this.newArticleForm.get("size")?.setValue(this?.data?.article?.size))}invalidator(_,s){return this.newArticleForm.controls[_].hasError(s)&&this.newArticleForm.controls[_].touched}requiredInputInvalidator(_){return this.invalidator(_,"required")}minLengthInputInvalidator(_){return this.invalidator(_,"minlength")}maxLengthInputInvalidator(_){return this.invalidator(_,"maxLength")}minCuantityInputInvalidator(_){return this.invalidator(_,"min")}createItem(){if(!this.newArticleForm.invalid)return this?.data?.article?this.updateItem():this.inventoryService.createArticle(this.formDirective.value).subscribe(_=>{this.inventoryStore.emitNewArticle(_),this.formDirective.resetForm()});this.newArticleForm.markAllAsTouched()}updateItem(){const{id:_,status:s,...g}=this.data.article;return this.inventoryService.update(this.data.article.id,{...this.formDirective.value}).subscribe({next:U=>{this.inventoryStore.updateArticle({id:_,status:s,options:["edit","delete"],...this.formDirective.value}),this.closeDialog()},error:U=>{this.dialogMessageService.setMessage(U.error.message),this.dialogService.openDialog({component:n.P})}})}closeDialog(){this.dialogService.closeDialog()}}return P.\u0275fac=function(_){return new(_||P)(e.Y36(a.WI),e.Y36(u.V),e.Y36(r.w),e.Y36(i.x),e.Y36(d.z),e.Y36(o.qu))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-new-article"]],viewQuery:function(_,s){if(1&_&&e.Gf(K,5),2&_){let g;e.iGM(g=e.CRH())&&(s.formDirective=g.first)}},decls:41,vars:8,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],["formDirective","ngForm"],["appearance","fill",1,"mt"],["matInput","","type","text","placeholder","Descripci\xf3n del producto","formControlName","description"],[4,"ngIf"],["matInput","","type","number","placeholder","Existencias del producto","autocomplete","off","formControlName","stock","min","0"],["formControlName","size",3,"errorStateMatcher"],["value","Pieza"],["value","Caja"],["value","Paquete"],["value","Juego"],["value","Metros"],[1,"flex"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","type","button",3,"click"]],template:function(_,s){1&_&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.qZA(),e.TgZ(2,"mat-card-content")(3,"form",0,1),e.NdJ("ngSubmit",function(){return s.createItem()}),e.TgZ(5,"mat-form-field",2)(6,"mat-label"),e._uU(7,"Descripci\xf3n"),e.qZA(),e._UZ(8,"input",3),e.YNc(9,O,4,0,"mat-error",4),e.YNc(10,B,5,0,"mat-error",4),e.qZA(),e.TgZ(11,"mat-form-field",2)(12,"mat-label"),e._uU(13,"Existencias"),e.qZA(),e._UZ(14,"input",5),e.YNc(15,D,2,0,"mat-error",4),e.YNc(16,A,4,0,"mat-error",4),e.qZA(),e.TgZ(17,"mat-form-field",2)(18,"mat-label"),e._uU(19,"Medidas"),e.qZA(),e.TgZ(20,"mat-select",6)(21,"mat-option"),e._uU(22,"Seleccionar"),e.qZA(),e.TgZ(23,"mat-option",7),e._uU(24," Pieza "),e.qZA(),e.TgZ(25,"mat-option",8),e._uU(26," Caja "),e.qZA(),e.TgZ(27,"mat-option",9),e._uU(28," Paquete "),e.qZA(),e.TgZ(29,"mat-option",10),e._uU(30," Juego "),e.qZA(),e.TgZ(31,"mat-option",11),e._uU(32," Metros "),e.qZA()(),e.YNc(33,p,4,0,"mat-error",4),e.qZA(),e.TgZ(34,"mat-card-actions",12)(35,"button",13)(36,"mat-icon"),e._uU(37,"save_alt"),e.qZA(),e._uU(38," Guardar "),e.qZA(),e.TgZ(39,"button",14),e.NdJ("click",function(){return s.closeDialog()}),e._uU(40,"Cerrar"),e.qZA()()()()),2&_&&(e.xp6(1),e.Oqu(s.data.title),e.xp6(2),e.Q6J("formGroup",s.newArticleForm),e.xp6(6),e.Q6J("ngIf",s.requiredInputInvalidator("description")),e.xp6(1),e.Q6J("ngIf",s.minLengthInputInvalidator("description")),e.xp6(5),e.Q6J("ngIf",s.minCuantityInputInvalidator("stock")),e.xp6(1),e.Q6J("ngIf",s.requiredInputInvalidator("stock")),e.xp6(4),e.Q6J("errorStateMatcher",s.matcher),e.xp6(13),e.Q6J("ngIf",s.requiredInputInvalidator("size")))},dependencies:[f.O5,b.Hw,y.lW,L.TO,L.KE,L.hX,R.ey,F.gD,$.Nt,W.dn,W.n5,W.hq,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.qQ,o.sg,o.u],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),P})()},9215:(x,T,t)=>{t.d(T,{V:()=>e});var o=t(2340),a=t(4004),n=t(4650),m=t(529);let e=(()=>{class u{constructor(i){this.http=i,this.baseUrl=o.N.baseUrl}getArticles({limit:i,offset:d}){return this.http.get(`${this.baseUrl}/articles?limit=${i}&offset=${d}`)}findByIdOrDescription({term:i,limit:d=20,offset:f=0}){return this.http.get(`${this.baseUrl}/articles/${i}?limit=${d}&offset=${f}`)}getCount(){return this.http.get(`${this.baseUrl}/articles/count`)}update(i,d){return this.http.patch(`${this.baseUrl}/articles/${i}`,{...d})}createArticle(i){return this.http.post(`${this.baseUrl}/articles`,{...i})}delete(i){return this.http.delete(`${this.baseUrl}/articles/${i}`)}getReport(i,d){return this.http.get(`${this.baseUrl}/pdf-generator?type=${i}${d?"&id="+d:""}`,{headers:{"Content-Type":"application/pdf"},responseType:"arraybuffer"}).pipe((0,a.U)(f=>new Blob([f],{type:"application/pdf"})))}}return u.\u0275fac=function(i){return new(i||u)(n.LFG(m.eN))},u.\u0275prov=n.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},8762:(x,T,t)=>{t.d(T,{w:()=>m});var o=t(1135),a=t(7579),n=t(4650);let m=(()=>{class e{constructor(){this.displayedArticles=new o.X([]),this.displayedArticles$=this.displayedArticles.asObservable(),this.newArticle=new a.x,this.newArticle$=this.newArticle.asObservable(),this.updatedArticle=new a.x,this.updatedArticle$=this.updatedArticle.asObservable()}updateDislayedArticles(r){this.displayedArticles.next(r)}emitNewArticle(r){this.newArticle.next(r)}updateArticle(r){this.updatedArticle.next(r)}}return e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);